let fs = require('fs');
let Utils = require('../helpers/utils');

let jsIncludeCSSIntoJs = {
  execute: function (linkus) {
    if (linkus.context.entry.extension === '.js' && linkus.context.autoGenerated === true) {
      let css = Utils.getFileContent(linkus.context.output + '.css');
      Utils.appendToFile(linkus.context.output,
        "\ndocument.head.innerHTML+='<style>" + css.replace(/'/g, "\\'").replace(/\n/g, '') + "</style>';"
      )
    }
  }
};

module.exports = jsIncludeCSSIntoJs;
