module.exports=function(){function v(){for(;a++<e;)if(d=b,b=c[a],-1===n.indexOf(b)||"!"===d&&"="!==b||"="===d&&"="!==b||"/"===b){g(a,1);a--;break}}function r(){for(;a++<e;)if(b=c[a],"["===b){for(;a++<e;)if(k=d,d=b,b=c[a],"]"===b)if("\\"===d){if("\\"!==k){r();break}}else{r();break}break}else if("/"===b)if(k=c[a-2],d=c[a-1],"\\"===d){if("\\"===k){w();break}}else{w();break}}function w(){for(;a++<e;)if(b=c[a],!/[a-z]/.test(b)||a===e){g(a,5);a--;break}}function g(f,p){l.push({value:c.substring(h,f),index:h,length:f-h,type:p});m++}let e,c,a,q,n="!=+*/-<>|^&?%~",x=/[a-z$_]/i,t=" .,;:\"'/{}[]()\n\t"+n,m,h,l,u,b,d,k,y=!0;return function(f){"string"===typeof f?c=f:(f.g&&(y=f.g),c=f.h);e=c.length;n="!=+*/-<>|^&?%~";x=/[a-z$_]/i;t=" .,;:\"'/{}[]()\n"+n;m=-1;a=0;q="";h=0;l=[];u=0;for(a=-1;a++<e;)if(b=c[a],"'"===b||'"'===b||"`"===b)for(h=a+1,q=c[a];a++<e;){if(k=d,d=b,b=c[a],"\\"!==d&&b===q||"\\"===k&&b===q){g(a,4);l[m].quote=q;break}}else if("/"===b)for(h=a;a++<e;){k=c[a-2];b=c[a];if("/"===b)for(;a++<e;){if(b=c[a],"\n"===b||null===b){g(a,6);a--;break}}else if("*"===b&&"\\"!==k)for(;a++<e;){if(d=b,b=c[a],"*"===d&&"/"===b){g(a+1,7);break}}else{let p;0<=m?(f=l[m].type,p=l[m].value):(f=9,p="");9!==f&&1!==f&&6!==f||/[)\]]/.test(p)?(v(),a--):r()}break}else if(x.test(b))for(h=a;a++<e;){if(b=c[a],-1!==t.indexOf(b)||null==b){g(a,3);a--;break}}else if(-1!==n.indexOf(b))h=a,v();else if(" "!==b&&-1!==t.indexOf(b))h=a,"("===b?u++:")"===b&&u--,-1!=="\t\n".indexOf(b)?y&&g(a+1,19):g(a+1,9);else if(/[0-9]/.test(b))for(h= a;a++<e;)if(d=b,b=c[a],"x"===b&&"0"===d){for(;a++<e;)if(b=c[a],!/[0-9a-f]/i.test(b)){g(a,13);a--;break}break}else if(!/[0-9.e]/i.test(b)){g(a,8);a--;break}return l}}();